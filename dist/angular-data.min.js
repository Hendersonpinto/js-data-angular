/**
* @author Jason Dobry <jason.dobry@gmail.com>
* @file angular-data.min.js
* @version 0.0.1-SNAPSHOT - Homepage <http://jmdobry.github.io/angular-data/>
* @copyright (c) 2014 Jason Dobry <http://jmdobry.github.io/angular-data>
* @license MIT <https://github.com/jmdobry/angular-data/blob/master/LICENSE>
*
* @overview In-browser data store for Angular.js.
*/
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){return!!a&&"object"==typeof a&&a.constructor===Object}b.exports=c},{}],2:[function(a,b){function c(a){for(var b,c=0,f=arguments.length;++c<f;)b=arguments[c],b&&e(b,d,a);return a}function d(a,b){var d=this[b];f(a)&&f(d)?c(d,a):this[b]=a}var e=a("./forOwn"),f=a("../lang/isPlainObject");b.exports=c},{"../lang/isPlainObject":1,"./forOwn":4}],3:[function(a,b){function c(){g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=!0;for(var a in{toString:null})f=!1}function d(a,b,d){var h,i=0;null==f&&c();for(h in a)if(e(b,a,h,d)===!1)break;if(f)for(;(h=g[i++])&&(a[h]===Object.prototype[h]||e(b,a,h,d)!==!1););}function e(a,b,c,d){return a.call(d,b[c],c,b)}var f,g;b.exports=d},{}],4:[function(a,b){function c(a,b,c){e(a,function(e,f){return d(a,f)?b.call(c,a[f],f,a):void 0})}var d=a("./hasOwn"),e=a("./forIn");b.exports=c},{"./forIn":3,"./hasOwn":5}],5:[function(a,b){function c(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=c},{}],6:[function(a,b){function c(a,b,c){for(var d=a[c],e=b(d);c>0;){var f=Math.floor((c+1)/2)-1,g=a[f];if(e>=b(g))break;a[f]=d,a[c]=g,c=f}}function d(a,b,c){for(var d=a.length,e=a[c],f=b(e);;){var g=2*(c+1),h=g-1,i=null;if(d>h){var j=a[h],k=b(j);f>k&&(i=h)}if(d>g){var l=a[g],m=b(l);m<(null===i?f:b(a[h]))&&(i=g)}if(null===i)break;a[c]=a[i],a[i]=e,c=i}}function e(a){if(a&&"function"!=typeof a)throw new Error("BinaryHeap(weightFunc): weightFunc: must be a function!");a=a||function(a){return a},this.weightFunc=a,this.heap=[]}e.prototype.push=function(a){this.heap.push(a),c(this.heap,this.weightFunc,this.heap.length-1)},e.prototype.peek=function(){return this.heap[0]},e.prototype.pop=function(){var a=this.heap[0],b=this.heap.pop();return this.heap.length>0&&(this.heap[0]=b,d(this.heap,this.weightFunc,0)),a},e.prototype.remove=function(a){for(var b=this.heap.length,e=0;b>e;e++)if(angular.equals(this.heap[e],a)){var f=this.heap[e],g=this.heap.pop();return e!==b-1&&(this.heap[e]=g,c(this.heap,this.weightFunc,e),d(this.heap,this.weightFunc,e)),f}return null},e.prototype.removeAll=function(){this.heap=[]},e.prototype.size=function(){return this.heap.length},b.exports=e},{}],7:[function(a,b){function c(a){if(d.isString(a)&&(a={name:a}),!d.isObject(a))throw new e.IllegalArgumentError("DS.defineResource(definition): definition: Must be an object!",{definition:{actual:typeof a,expected:"object"}});if(!d.isString(a.name))throw new e.IllegalArgumentError("DS.defineResource(definition): definition.name: Must be a string!",{definition:{name:{actual:typeof a.name,expected:"string"}}});if(a.idAttribute&&!d.isString(a.idAttribute))throw new e.IllegalArgumentError("DS.defineResource(definition): definition.idAttribute: Must be a string!",{definition:{idAttribute:{actual:typeof a.idAttribute,expected:"string"}}});if(f[a.name])throw new e.RuntimeError("DS.defineResource(definition): "+a.name+" is already registered!");try{f[a.name]=a;var b=f[a.name];b.collection=[],b.completedQueries={},b.pendingQueries={},b.index={},b.modified={},b.collectionModified=0}catch(c){throw new e.UnhandledError(c)}}var d=a("../../utils"),e=a("../../errors"),f=a("../store");b.exports=c},{"../../errors":19,"../../utils":21,"../store":18}],8:[function(a,b){function c(){}b.exports=c},{}],9:[function(a,b){function c(a,b){for(var c=0;c<a.collection.length&&a.collection[c][a.idAttribute||"id"]!=b;c++);a.collection.splice(c,1),delete a.index[b],delete a.modified[b],a.collectionModified=e.updateTimestamp(a.collectionModified)}function d(a,b){if(!g[a])throw new f.RuntimeError("DS.eject(resourceName, id): "+a+" is not a registered resource!");if(!e.isString(b)&&!e.isNumber(b))throw new f.IllegalArgumentError("DS.eject(resourceName, id): id: You must provide an id!",{id:{actual:typeof b,expected:"string|number"}});try{h.$rootScope.$$phase?c(g[a],b):h.$rootScope.$apply(function(){c(g[a],b)})}catch(d){throw new f.UnhandledError(d)}}var e=a("../../utils"),f=a("../../errors"),g=a("../store"),h=a("../services");b.exports=d},{"../../errors":19,"../../utils":21,"../services":17,"../store":18}],10:[function(a,b){function c(){}b.exports=c},{}],11:[function(a,b){function c(){}b.exports=c},{}],12:[function(a,b){function c(){}b.exports=c},{}],13:[function(a,b){function c(a,b){if(!f[a])throw new e.IllegalArgumentError("DS.get(resourceName, id): "+a+" is not a registered resource!");if(!d.isString(b)&&!d.isNumber(b))throw new e.IllegalArgumentError("DS.get(resourceName, id): id: You must provide an id!");return b in f[a].index||this.find(a,b),f[a].index[b]}var d=a("../../utils"),e=a("../../errors"),f=a("../store");b.exports=c},{"../../errors":19,"../../utils":21,"../store":18}],14:[function(a,b){function c(){this.$get=["$rootScope","$log","$http","$q",function(b,c,e,f){return d.$rootScope=b,d.$log=c,d.$http=e,d.$q=f,{defineResource:a("./defineResource"),destroy:a("./destroy"),eject:a("./eject"),filter:a("./filter"),findAll:a("./findAll"),find:a("./find"),get:a("./get"),inject:a("./inject"),lastModified:a("./lastModified")}}]}var d=a("./services");b.exports=c},{"./defineResource":7,"./destroy":8,"./eject":9,"./filter":10,"./find":11,"./findAll":12,"./get":13,"./inject":15,"./lastModified":16,"./services":17}],15:[function(a,b){function c(a,b){var c=a.idAttribute||"id";a.index[b[c]]?e.deepMixIn(a.index[b[c]],b):(a.index[b[c]]=b,a.collection.push(a.index[b[c]])),a.modified[b[c]]=e.updateTimestamp(a.modified[b[c]]),a.collectionModified=e.updateTimestamp(a.collectionModified)}function d(a,b){if(!g[a])throw new f.RuntimeError("DS.inject(resourceName, attrs): "+a+" is not a registered resource!");if(!e.isObject(b))throw new f.IllegalArgumentError("DS.inject(resourceName, attrs): attrs: Must be an object!",{attrs:{actual:typeof b,expected:"object"}});var d=g[a],i=d.idAttribute||"id";if(b[i]){try{h.$rootScope.$$phase?c(g[a],b):h.$rootScope.$apply(function(){c(g[a],b)})}catch(j){throw new f.UnhandledError(j)}return d.index[b[i]]}throw new f.RuntimeError("DS.inject(resourceName, attrs): attrs: Must contain the property specified by `idAttribute` in the resource definition!")}var e=a("../../utils"),f=a("../../errors"),g=a("../store"),h=a("../services");b.exports=d},{"../../errors":19,"../../utils":21,"../services":17,"../store":18}],16:[function(a,b){function c(a,b){if(!f[a])throw new e.RuntimeError("DS.lastModified(resourceName[, id]): "+a+" is not a registered resource!");if(b&&!d.isString(b)&&!d.isNumber(b))throw new e.IllegalArgumentError("DS.lastModified(resourceName[, id]): id: Must be a string or number!",{id:{actual:typeof b,expected:"string|number"}});try{return b?(b in f[a].modified||(f[a].modified[b]=0),f[a].modified[b]):f[a].collectionModified}catch(c){throw new e.UnhandledError(c)}}var d=a("../../utils"),e=a("../../errors"),f=a("../store");b.exports=c},{"../../errors":19,"../../utils":21,"../store":18}],17:[function(a,b){b.exports={}},{}],18:[function(a,b){b.exports={}},{}],19:[function(a,b){b.exports={UnhandledError:function(a){Error.call(this),Error.captureStackTrace(this,this.constructor),a=a||{},this.type=this.constructor.name,this.originalError=a,this.message="UnhandledError: This is an uncaught exception. Please consider submitting an issue at https://github.com/jmdobry/reheat/issues.\n\nOriginal Uncaught Exception:\n"+(a.stack?a.stack.toString():a.stack),this.stack=this.message},IllegalArgumentError:function(a,b){Error.call(this),Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.errors=b||{},this.message=a||"Illegal Argument!"},ValidationError:function(a,b){Error.call(this),Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.errors=b||{},this.message=a||"Validation Error!"},RuntimeError:function(a,b){Error.call(this),Error.captureStackTrace(this,this.constructor),this.type=this.constructor.name,this.errors=b||{},this.message=a||"RuntimeError Error!"}}},{}],20:[function(a){!function(b,c){"use strict";function d(){this.$get=function(){return a("./binaryHeap")}}c.module("jmdobry.binary-heap",[]),c.module("jmdobry.binary-heap").provider("BinaryHeap",d),c.module("jmdobry.angular-data",["ng","jmdobry.binary-heap"]),c.module("jmdobry.angular-data").provider("DS",a("./datastore"))}(window,window.angular)},{"./binaryHeap":6,"./datastore":14}],21:[function(a,b){b.exports={isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isNumber:angular.isNumber,deepMixIn:a("mout/object/deepMixIn"),updateTimestamp:function(a){var b="function"==typeof Date.now?Date.now():(new Date).getTime();return a&&a>=b?a+1:b},mergeArrays:function(a,b,c){c=c||"id";for(var d=0;d<a.length;d++)for(var e=0;e<b.length;e++)if(a[d][c]==b[e][c]){angular.extend(a[d],b[e]),b.splice(e,1);break}return a.concat(b)}}},{"mout/object/deepMixIn":2}]},{},[20]);